name: test query-issues-action

on:
  push:
  workflow_dispatch:

jobs:
  test-query-issues-action:
    runs-on: ubuntu-latest
    name: A job to test query-issues-action
    steps:
      - name: use action
        id: my-action
        uses: jrdeng/query-issues-action@master
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repo: jrdeng/jrdeng.github.io
          author: jrdeng

      - name: checkout
        uses: actions/checkout@v2

      - name: store output
        run: |
          echo "${{ steps.my-action.outputs.issue_list }}" > issues.json
          pwd
          ls
          git config --global user.email "junren.deng@gmail.com"
          git config --global user.name "Junren Deng"
          git add .
          git commit -m "update issues.json"
          git push
          
